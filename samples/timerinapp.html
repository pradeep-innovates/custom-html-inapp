<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <meta
      name="viewport"
      content="width=device-width, initial-scale=1, shrink-to-fit=no"
    />
    <title>FlipDown Example</title>
    <script>
      var declare = 1748602693;
      var timer_theme = "flipdown__theme-dark"; // change to flipdown__theme-light or flipdown__theme-dark
      var h1Text = "70% OFF";
      var pText = "‚è∞ Complete your order before the sale goes away";
      var bText = "Claim Now";
      var bhyperlink = "app;//p2"; //Any internal deeplink or
    </script>
    <style>
      :root {
        --h1-color: #ffffff;
        --h1-font-size: 2em;
        --h1-font-family: "Arial", sans-serif;
        --p-font-family: "Times New Roman", sans-serif;
        --p-font-size: 12px;
        --p-color: #edebeb;
        --bg-image: url("https://iili.io/dWdzPmF.md.png");
        --button-bg: #e14871;
        --button-color: white;
        --button-font: "Arial", sans-serif;
      }

      html {
        height: 100%;
      }

      body {
        margin: 0px;
        height: 100%;
        display: flex;
        align-items: center;
        align-content: space-around;
      }

      body,
      .example h1,
      .example p {
        transition: all 0.2s ease-in-out;
      }

      .example {
        width: 300px;
        height: 300px;
        background-image: var(--bg-image);
        background-size: cover;
        background-position: center;
        background-repeat: no-repeat;
        position: relative;
        margin: auto;
        padding: 20px;
      }

      .example .flipdown {
        margin: auto;
      }

      .example h1 {
        text-align: center;
        font-weight: 100;
        font-size: var(--h1-font-size);
        margin-top: 0;
        margin-bottom: 10px;
        color: var(--h1-color);
        font-family: var(--h1-font-family);
      }

      .example p {
        text-align: center;
        font-weight: 100;
        margin-top: 0;
        margin-bottom: 35px;
        font-family: var(--p-font-family);
        color: var(--p-color);
        font-size: var(--p-font-size);
      }

      #claim-button {
        position: absolute;
        bottom: 60px;
        left: 50%;
        transform: translateX(-50%);
        padding: 10px 20px;
        background-color: var(--button-bg);
        color: var(--button-color);
        border: none;
        border-radius: 8px;
        cursor: pointer;
        font-size: 16px;
        font-family: var(--button-font);
        text-align: center;
        box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);
        text-decoration: none;
        transition: border 0.3s, background-color 0.3s;
      }

      .close {
        position: absolute;
        top: 6px;
        right: 6px;
        height: 24px;
        width: 24px;
        background: #ffffff82;
        border-radius: 4px;
        display: flex;
        justify-content: center;
        align-items: center;
        cursor: pointer;
      }

      /* Rotor group headings */
      .flipdown.flipdown__theme-dark .rotor-group-heading:before {
        color: #000000;
      }

      /* Delimeters */
      .flipdown.flipdown__theme-dark
        .rotor-group:nth-child(n + 2):nth-child(-n + 3):before,
      .flipdown.flipdown__theme-dark
        .rotor-group:nth-child(n + 2):nth-child(-n + 3):after {
        background-color: #151515;
      }

      /* Rotor tops */
      .flipdown.flipdown__theme-dark .rotor,
      .flipdown.flipdown__theme-dark .rotor-top,
      .flipdown.flipdown__theme-dark .rotor-leaf-front {
        color: #ffffff;
        background-color: #151515;
      }

      /* Rotor bottoms */
      .flipdown.flipdown__theme-dark .rotor-bottom,
      .flipdown.flipdown__theme-dark .rotor-leaf-rear {
        color: #efefef;
        background-color: #202020;
      }

      /* Hinge */
      .flipdown.flipdown__theme-dark .rotor:after {
        border-top: solid 1px #151515;
      }

      /********** Theme: light **********/
      /* Font styles */
      .flipdown.flipdown__theme-light {
        font-family: sans-serif;
        font-weight: bold;
      }

      /* Rotor group headings */
      .flipdown.flipdown__theme-light .rotor-group-heading:before {
        color: #eeeeee;
      }

      /* Delimeters */
      .flipdown.flipdown__theme-light
        .rotor-group:nth-child(n + 2):nth-child(-n + 3):before,
      .flipdown.flipdown__theme-light
        .rotor-group:nth-child(n + 2):nth-child(-n + 3):after {
        background-color: #dddddd;
      }

      /* Rotor tops */
      .flipdown.flipdown__theme-light .rotor,
      .flipdown.flipdown__theme-light .rotor-top,
      .flipdown.flipdown__theme-light .rotor-leaf-front {
        color: #222222;
        background-color: #dddddd;
      }

      /* Rotor bottoms */
      .flipdown.flipdown__theme-light .rotor-bottom,
      .flipdown.flipdown__theme-light .rotor-leaf-rear {
        color: #333333;
        background-color: #eeeeee;
      }

      /* Hinge */
      .flipdown.flipdown__theme-light .rotor:after {
        border-top: solid 1px #222222;
      }

      .flipdown {
        overflow: visible;
        width: 510px;
        height: 110px;
      }

      .flipdown .rotor-group {
        position: relative;
        float: left;
        padding-right: 30px;
      }

      .flipdown .rotor-group:last-child {
        padding-right: 0;
      }

      .flipdown .rotor-group-heading:before {
        display: block;
        height: 30px;
        line-height: 30px;
        text-align: center;
      }

      .flipdown .rotor-group:nth-child(1) .rotor-group-heading:before {
        content: attr(data-before);
      }

      .flipdown .rotor-group:nth-child(2) .rotor-group-heading:before {
        content: attr(data-before);
      }

      .flipdown .rotor-group:nth-child(3) .rotor-group-heading:before {
        content: attr(data-before);
      }

      .flipdown .rotor-group:nth-child(4) .rotor-group-heading:before {
        content: attr(data-before);
      }

      .flipdown .rotor-group:nth-child(n + 2):nth-child(-n + 3):before {
        content: "";
        position: absolute;
        bottom: 20px;
        left: 115px;
        width: 10px;
        height: 10px;
        border-radius: 50%;
      }

      .flipdown .rotor-group:nth-child(n + 2):nth-child(-n + 3):after {
        content: "";
        position: absolute;
        bottom: 50px;
        left: 115px;
        width: 10px;
        height: 10px;
        border-radius: 50%;
      }

      .flipdown .rotor {
        position: relative;
        float: left;
        width: 50px;
        height: 80px;
        margin: 0px 5px 0px 0px;
        border-radius: 4px;
        font-size: 4rem;
        text-align: center;
        perspective: 200px;
      }

      .flipdown .rotor:last-child {
        margin-right: 0;
      }

      .flipdown .rotor-top,
      .flipdown .rotor-bottom {
        overflow: hidden;
        position: absolute;
        width: 50px;
        height: 40px;
      }

      .flipdown .rotor-leaf {
        z-index: 1;
        position: absolute;
        width: 50px;
        height: 80px;
        transform-style: preserve-3d;
        transition: transform 0s;
      }

      .flipdown .rotor-leaf.flipped {
        transform: rotateX(-180deg);
        transition: all 0.5s ease-in-out;
      }

      .flipdown .rotor-leaf-front,
      .flipdown .rotor-leaf-rear {
        overflow: hidden;
        position: absolute;
        width: 50px;
        height: 40px;
        margin: 0;
        transform: rotateX(0deg);
        backface-visibility: hidden;
        -webkit-backface-visibility: hidden;
      }

      .flipdown .rotor-leaf-front {
        line-height: 80px;
        border-radius: 4px 4px 0px 0px;
      }

      .flipdown .rotor-leaf-rear {
        line-height: 0px;
        border-radius: 0px 0px 4px 4px;
        transform: rotateX(-180deg);
      }

      .flipdown .rotor-top {
        line-height: 80px;
        border-radius: 4px 4px 0px 0px;
      }

      .flipdown .rotor-bottom {
        bottom: 0;
        line-height: 0px;
        border-radius: 0px 0px 4px 4px;
      }

      .flipdown .rotor:after {
        content: "";
        z-index: 2;
        position: absolute;
        bottom: 0px;
        left: 0px;
        width: 50px;
        height: 40px;
        border-radius: 0px 0px 4px 4px;
      }

      @media (max-width: 1050px) {
        .flipdown {
          width: 350px;
          height: 70px;
          position: relative;
          right: 2%;
        }

        .flipdown .rotor {
          font-size: 2.2rem;
          margin-right: 3px;
        }

        .flipdown .rotor,
        .flipdown .rotor-leaf,
        .flipdown .rotor-leaf-front,
        .flipdown .rotor-leaf-rear,
        .flipdown .rotor-top,
        .flipdown .rotor-bottom,
        .flipdown .rotor:after {
          width: 30px;
        }

        .flipdown .rotor-group {
          padding-right: 20px;
        }

        .flipdown .rotor-group:last-child {
          padding-right: 0px;
        }

        .flipdown .rotor-group-heading:before {
          font-size: 0.8rem;
          height: 20px;
          line-height: 20px;
        }

        .flipdown .rotor-group:nth-child(n + 2):nth-child(-n + 3):before,
        .flipdown .rotor-group:nth-child(n + 2):nth-child(-n + 3):after {
          left: 69px;
        }

        .flipdown .rotor-group:nth-child(n + 2):nth-child(-n + 3):before {
          bottom: 13px;
          height: 8px;
          width: 8px;
        }

        .flipdown .rotor-group:nth-child(n + 2):nth-child(-n + 3):after {
          bottom: 29px;
          height: 8px;
          width: 8px;
        }

        .flipdown .rotor-leaf-front,
        .flipdown .rotor-top {
          line-height: 50px;
        }

        .flipdown .rotor-leaf,
        .flipdown .rotor {
          height: 50px;
        }

        .flipdown .rotor-leaf-front,
        .flipdown .rotor-leaf-rear,
        .flipdown .rotor-top,
        .flipdown .rotor-bottom,
        .flipdown .rotor:after {
          height: 25px;
        }
      }
    </style>
  </head>

  <body>
    <div class="example">
      <h1 id="heading">
        <!-- Heading text is coming from the top script from the variable h1text -->
      </h1>
      <p id="paraText">
        <!-- Paragraph text is coming from the top script from the variable ptext -->
      </p>
      <div id="flipdown" class="flipdown"></div>
      <div id="close" class="close" style="visibility: visible">
        <svg
          width="10"
          height="10"
          viewBox="0 0 10 10"
          fill="none"
          xmlns="http://www.w3.org/2000/svg"
        >
          <path
            fill-rule="evenodd"
            clip-rule="evenodd"
            d="M9.76115 0.239464C9.44252 -0.0791702 8.92591 -0.0791704 8.60728 0.239464L4.94021 3.90653L1.39285 0.359172C1.07422 0.0405376 0.55761 0.0405375 0.238976 0.359172C-0.0796584 0.677806 -0.0796587 1.19441 0.238976 1.51305L3.78633 5.06041L0.359731 8.48701C0.0410967 8.80564 0.0410966 9.32225 0.359731 9.64089C0.678365 9.95952 1.19497 9.95952 1.51361 9.64089L4.94021 6.21428L8.48652 9.76059C8.80516 10.0792 9.32176 10.0792 9.6404 9.76059C9.95903 9.44196 9.95903 8.92535 9.6404 8.60672L6.09409 5.06041L9.76115 1.39334C10.0798 1.07471 10.0798 0.558098 9.76115 0.239464Z"
            fill="#434761"
          ></path>
        </svg>
      </div>
      <a id="claim-button">
        <!-- Paragraph text is coming from the top script from the variable ptext -->
      </a>
    </div>
    <script>
      document.addEventListener("DOMContentLoaded", () => {
        var btns = document.querySelectorAll(".close");
        btns.forEach((btn) => {
          btn.addEventListener("click", closePopUp);
        });
        function closePopUp() {
          //close pop-up
          if (window.CleverTap) {
            CleverTap.dismissInAppNotification();
            document.getElementById("heading").textContent = "hello";
          } else {
            document.location.href = "wzrk://thisleadstonowhere";
            //window.webkit.messagehandlers.clevertap.hide();
          }
        }
        // Change theme
        function changeTheme() {
          let body = document.body;
          let flipdown = body.querySelector("#flipdown");
          // Remove existing theme classes
          flipdown.classList.remove(
            "flipdown__theme-light",
            "flipdown__theme-dark"
          );
          // Apply the new theme class based on the timer_theme variable
          flipdown.classList.add(timer_theme);
        }
        changeTheme();
        //Change H1 Text
        document.getElementById("heading").textContent = h1Text;
        //Change p Text
        document.getElementById("paraText").textContent = pText;
        //Change p Text
        document.getElementById("claim-button").textContent = bText;
        //Change the button hyperlink
        document
          .getElementById("claim-button")
          .setAttribute("href", bhyperlink);
        // Unix timestamp (in seconds) to count down to
        var timerDay = new Date().getTime() / 1000 + 86400 * 4 + 1;
        // Set up FlipDown
        // Enter time here in epoch value
        var flipdown = new FlipDown(declare)
          // Start the countdown
          .start()
          // Do something when the countdown ends
          .ifEnded(() => {
            document.getElementById("flipdown").innerHTML = "EXPIRED";
            console.log("The countdown has ended!");
          });
        // Show version number
        var ver = document.getElementById("ver");
        ver.innerHTML = flipdown.version;
      });
      ("use strict");
      function _typeof(obj) {
        if (
          typeof Symbol === "function" &&
          typeof Symbol.iterator === "symbol"
        ) {
          _typeof = function _typeof(obj) {
            return typeof obj;
          };
        } else {
          _typeof = function _typeof(obj) {
            return obj &&
              typeof Symbol === "function" &&
              obj.constructor === Symbol &&
              obj !== Symbol.prototype
              ? "symbol"
              : typeof obj;
          };
        }
        return _typeof(obj);
      }
      function _classCallCheck(instance, Constructor) {
        if (!(instance instanceof Constructor)) {
          throw new TypeError("Cannot call a class as a function");
        }
      }
      function _defineProperties(target, props) {
        for (var i = 0; i < props.length; i++) {
          var descriptor = props[i];
          descriptor.enumerable = descriptor.enumerable || false;
          descriptor.configurable = true;
          if ("value" in descriptor) descriptor.writable = true;
          Object.defineProperty(target, descriptor.key, descriptor);
        }
      }
      function _createClass(Constructor, protoProps, staticProps) {
        if (protoProps) _defineProperties(Constructor.prototype, protoProps);
        if (staticProps) _defineProperties(Constructor, staticProps);
        return Constructor;
      }
      var FlipDown = (function () {
        function FlipDown(uts) {
          var el =
            arguments.length > 1 && arguments[1] !== undefined
              ? arguments[1]
              : "flipdown";
          var opt =
            arguments.length > 2 && arguments[2] !== undefined
              ? arguments[2]
              : {};
          _classCallCheck(this, FlipDown);
          if (typeof uts !== "number") {
            throw new Error(
              "FlipDown: Constructor expected unix timestamp, got ".concat(
                _typeof(uts),
                " instead."
              )
            );
          }
          if (_typeof(el) === "object") {
            opt = el;
            el = "flipdown";
          }
          this.initialised = false;
          this.now = this._getTime();
          this.epoch = uts;
          this.countdownEnded = false;
          this.hasEndedCallback = null;
          this.element = document.getElementById(el);
          this.rotors = [];
          this.rotorLeafFront = [];
          this.rotorLeafRear = [];
          this.rotorTops = [];
          this.rotorBottoms = [];
          this.countdown = null;
          this.daysRemaining = 0;
          this.clockValues = {};
          this.clockStrings = {};
          this.clockValuesAsString = [];
          this.prevClockValuesAsString = [];
          this.opts = this._parseOptions(opt);
          this._setOptions();
        }
        _createClass(FlipDown, [
          {
            key: "start",
            value: function start() {
              if (!this.initialised) this._init();
              this.countdown = setInterval(this._tick.bind(this), 1000);
              return this;
            },
          },
          {
            key: "ifEnded",
            value: function ifEnded(cb) {
              this.hasEndedCallback = function () {
                cb();
                this.hasEndedCallback = null;
              };
              return this;
            },
          },
          {
            key: "_getTime",
            value: function _getTime() {
              return new Date().getTime() / 1000;
            },
          },
          {
            key: "_hasCountdownEnded",
            value: function _hasCountdownEnded() {
              if (this.epoch - this.now < 0) {
                this.countdownEnded = true;
                if (this.hasEndedCallback != null) {
                  this.hasEndedCallback();
                  this.hasEndedCallback = null;
                }
                return true;
              } else {
                this.countdownEnded = false;
                return false;
              }
            },
          },
          {
            key: "_parseOptions",
            value: function _parseOptions(opt) {
              var headings = ["Days", "Hours", "Minutes", "Seconds"];
              if (opt.headings && opt.headings.length === 4) {
                headings = opt.headings;
              }
              return {
                theme: opt.hasOwnProperty("theme") ? opt.theme : "dark",
                headings: headings,
              };
            },
          },
          {
            key: "_setOptions",
            value: function _setOptions() {
              this.element.classList.add(
                "flipdown__theme-".concat(this.opts.theme)
              );
            },
          },
          {
            key: "_init",
            value: function _init() {
              this.initialised = true;
              if (this._hasCountdownEnded()) {
                this.daysremaining = 0;
              } else {
                this.daysremaining = Math.floor(
                  (this.epoch - this.now) / 86400
                ).toString().length;
              }
              var dayRotorCount =
                this.daysremaining <= 2 ? 2 : this.daysremaining;
              for (var i = 0; i < dayRotorCount + 6; i++) {
                this.rotors.push(this._createRotor(0));
              }
              var dayRotors = [];
              for (var i = 0; i < dayRotorCount; i++) {
                dayRotors.push(this.rotors[i]);
              }
              this.element.appendChild(this._createRotorGroup(dayRotors, 0));
              var count = dayRotorCount;
              for (var i = 0; i < 3; i++) {
                var otherRotors = [];
                for (var j = 0; j < 2; j++) {
                  otherRotors.push(this.rotors[count]);
                  count++;
                }
                this.element.appendChild(
                  this._createRotorGroup(otherRotors, i + 1)
                );
              }
              this.rotorLeafFront = Array.prototype.slice.call(
                this.element.getElementsByClassName("rotor-leaf-front")
              );
              this.rotorLeafRear = Array.prototype.slice.call(
                this.element.getElementsByClassName("rotor-leaf-rear")
              );
              this.rotorTop = Array.prototype.slice.call(
                this.element.getElementsByClassName("rotor-top")
              );
              this.rotorBottom = Array.prototype.slice.call(
                this.element.getElementsByClassName("rotor-bottom")
              );
              this._tick();
              this._updateClockValues(true);
              return this;
            },
          },
          {
            key: "_createRotorGroup",
            value: function _createRotorGroup(rotors, rotorIndex) {
              var rotorGroup = document.createElement("div");
              rotorGroup.className = "rotor-group";
              var dayRotorGroupHeading = document.createElement("div");
              dayRotorGroupHeading.className = "rotor-group-heading";
              dayRotorGroupHeading.setAttribute(
                "data-before",
                this.opts.headings[rotorIndex]
              );
              rotorGroup.appendChild(dayRotorGroupHeading);
              appendChildren(rotorGroup, rotors);
              return rotorGroup;
            },
          },
          {
            key: "_createRotor",
            value: function _createRotor() {
              var v =
                arguments.length > 0 && arguments[0] !== undefined
                  ? arguments[0]
                  : 0;
              var rotor = document.createElement("div");
              var rotorLeaf = document.createElement("div");
              var rotorLeafRear = document.createElement("figure");
              var rotorLeafFront = document.createElement("figure");
              var rotorTop = document.createElement("div");
              var rotorBottom = document.createElement("div");
              rotor.className = "rotor";
              rotorLeaf.className = "rotor-leaf";
              rotorLeafRear.className = "rotor-leaf-rear";
              rotorLeafFront.className = "rotor-leaf-front";
              rotorTop.className = "rotor-top";
              rotorBottom.className = "rotor-bottom";
              rotorLeafRear.textContent = v;
              rotorTop.textContent = v;
              rotorBottom.textContent = v;
              appendChildren(rotor, [rotorLeaf, rotorTop, rotorBottom]);
              appendChildren(rotorLeaf, [rotorLeafRear, rotorLeafFront]);
              return rotor;
            },
          },
          {
            key: "_tick",
            value: function _tick() {
              this.now = this._getTime();
              var diff = this.epoch - this.now <= 0 ? 0 : this.epoch - this.now;
              this.clockValues.d = Math.floor(diff / 86400);
              diff -= this.clockValues.d * 86400;
              this.clockValues.h = Math.floor(diff / 3600);
              diff -= this.clockValues.h * 3600;
              this.clockValues.m = Math.floor(diff / 60);
              diff -= this.clockValues.m * 60;
              this.clockValues.s = Math.floor(diff);
              this._updateClockValues();
              this._hasCountdownEnded();
            },
          },
          {
            key: "_updateClockValues",
            value: function _updateClockValues() {
              var _this = this;
              var init =
                arguments.length > 0 && arguments[0] !== undefined
                  ? arguments[0]
                  : false;
              this.clockStrings.d = pad(this.clockValues.d, 2);
              this.clockStrings.h = pad(this.clockValues.h, 2);
              this.clockStrings.m = pad(this.clockValues.m, 2);
              this.clockStrings.s = pad(this.clockValues.s, 2);
              this.clockValuesAsString = (
                this.clockStrings.d +
                this.clockStrings.h +
                this.clockStrings.m +
                this.clockStrings.s
              ).split("");
              this.rotorLeafFront.forEach(function (el, i) {
                el.textContent = _this.prevClockValuesAsString[i];
              });
              this.rotorBottom.forEach(function (el, i) {
                el.textContent = _this.prevClockValuesAsString[i];
              });
              function rotorTopFlip() {
                var _this2 = this;
                this.rotorTop.forEach(function (el, i) {
                  if (el.textContent != _this2.clockValuesAsString[i]) {
                    el.textContent = _this2.clockValuesAsString[i];
                  }
                });
              }
              function rotorLeafRearFlip() {
                var _this3 = this;
                this.rotorLeafRear.forEach(function (el, i) {
                  if (el.textContent != _this3.clockValuesAsString[i]) {
                    el.textContent = _this3.clockValuesAsString[i];
                    el.parentElement.classList.add("flipped");
                    var flip = setInterval(
                      function () {
                        el.parentElement.classList.remove("flipped");
                        clearInterval(flip);
                      }.bind(_this3),
                      500
                    );
                  }
                });
              }
              if (!init) {
                setTimeout(rotorTopFlip.bind(this), 500);
                setTimeout(rotorLeafRearFlip.bind(this), 500);
              } else {
                rotorTopFlip.call(this);
                rotorLeafRearFlip.call(this);
              }
              this.prevClockValuesAsString = this.clockValuesAsString;
            },
          },
        ]);
        return FlipDown;
      })();
      function pad(n, len) {
        n = n.toString();
        return n.length < len ? pad("0" + n, len) : n;
      }
      function appendChildren(parent, children) {
        children.forEach(function (el) {
          parent.appendChild(el);
        });
      }
    </script>
  </body>
</html>
